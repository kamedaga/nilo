# レスポンシブデザイン対応

Niloでは、ウィンドウサイズに応じてスタイルを動的に変更するレスポンシブデザインをサポートしています。

## 基本的な使い方

スタイル内で条件式をキーとして使用することで、特定の条件下でのみ適用されるスタイルを定義できます。

```nilo
Text("Hello", style: {
    font_size: 48px,
    "window.width <= 800": {font_size: 32px},
    "window.width <= 600": {font_size: 24px}
})
```

この例では:
- デフォルトでは `font_size: 48px` が適用されます
- ウィンドウ幅が800px以下の場合、`font_size: 32px` が適用されます
- ウィンドウ幅が600px以下の場合、`font_size: 24px` が適用されます

## サポートされている条件

### ウィンドウサイズ

- `window.width` - ウィンドウの幅（ピクセル）
- `window.height` - ウィンドウの高さ（ピクセル）

### 比較演算子

- `<=` - 以下
- `>=` - 以上
- `<` - 未満
- `>` - より大きい
- `==` - 等しい
- `!=` - 等しくない

## 使用例

### 1. レスポンシブなフォントサイズ

```nilo
Text("タイトル", style: {
    font_size: 56px,
    "window.width <= 1024": {font_size: 42px},
    "window.width <= 768": {font_size: 32px},
    "window.width <= 480": {font_size: 24px}
})
```

### 2. レスポンシブなパディング

```nilo
VStack(style: {
    padding: [60, 40],
    "window.width <= 800": {padding: [40, 30]},
    "window.width <= 600": {padding: [20, 15]}
}) {
    // コンテンツ
}
```

### 3. 複数のプロパティを変更

```nilo
VStack(style: {
    font_size: 24px,
    padding: [40, 20],
    gap: 16px,
    "window.width <= 800": {
        font_size: 20px,
        padding: [30, 15],
        gap: 12px
    },
    "window.width <= 600": {
        font_size: 16px,
        padding: [20, 10],
        gap: 8px
    }
}) {
    // コンテンツ
}
```

### 4. ウィンドウの高さに基づく条件

```nilo
VStack(style: {
    height: 600px,
    "window.height <= 800": {height: 400px},
    "window.height <= 600": {height: 300px}
}) {
    // コンテンツ
}
```

## 注意事項

1. **条件の評価順序**: 条件は上から順に評価され、真となる条件のスタイルがマージされます。
2. **文字列キー**: 条件式は文字列として記述する必要があります（ダブルクォートで囲む）。
3. **スタイルのマージ**: 条件に一致するスタイルは、ベーススタイルに上書きされる形でマージされます。
4. **パフォーマンス**: 条件はレンダリング時とレイアウト計算時に評価されるため、複雑な条件を大量に使用するとパフォーマンスに影響する可能性があります。

## ブレークポイントの推奨値

一般的なデバイスサイズに基づくブレークポイント:

- **モバイル（小）**: `window.width <= 480`
- **モバイル（大）**: `window.width <= 600`
- **タブレット**: `window.width <= 768`
- **デスクトップ（小）**: `window.width <= 1024`
- **デスクトップ（中）**: `window.width <= 1280`
- **デスクトップ（大）**: `window.width <= 1920`

## 実装の詳細

レスポンシブスタイルは以下の方法で実装されています:

1. パーサーがオブジェクトキーとして文字列を許可するように拡張
2. 条件式（例: "window.width <= 800"）を解析してAST内の`ResponsiveRule`として保存
3. レンダリング時とレイアウト計算時に条件を評価
4. 条件が真の場合、対応するスタイルをベーススタイルにマージ

これにより、ウィンドウサイズの変更に応じて動的にUIが調整されます。
